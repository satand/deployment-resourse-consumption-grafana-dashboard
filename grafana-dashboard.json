{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "description": "Namespace-level resource consumption analysis with simulation capabilities. Navigate to Workload Details for individual workload analysis.",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 681,
  "links": [
    {
      "asDropdown": false,
      "icon": "external link",
      "includeVars": true,
      "keepTime": true,
      "tags": [],
      "targetBlank": true,
      "title": "\ud83d\udcd6 View Documentation \u2192",
      "tooltip": "Open documentation for this dashboard",
      "type": "link",
      "url": "/d/workload-resource-analysis-docs"
    }
  ],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 100,
      "panels": [],
      "title": "\ud83d\udcca Namespace Resource Consumption: $namespace",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Shows whether CPU/Memory requests and limits are configured for each workload in the namespace.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "center",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [
            {
              "options": {
                "0": {
                  "color": "red",
                  "index": 1,
                  "text": "UNSET"
                },
                "1": {
                  "color": "green",
                  "index": 0,
                  "text": "SET"
                }
              },
              "type": "value"
            },
            {
              "options": {
                "match": "null",
                "result": {
                  "color": "red",
                  "index": 2,
                  "text": "UNSET"
                }
              },
              "type": "special"
            }
          ],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "red",
                "value": null
              },
              {
                "color": "green",
                "value": 1
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "custom.align",
                "value": "left"
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Req|Mem Lim"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU Lim"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-background"
                }
              },
              {
                "id": "mappings",
                "value": [
                  {
                    "options": {
                      "0": {
                        "color": "yellow",
                        "index": 1,
                        "text": "UNSET"
                      },
                      "1": {
                        "color": "green",
                        "index": 0,
                        "text": "SET"
                      }
                    },
                    "type": "value"
                  },
                  {
                    "options": {
                      "match": "null",
                      "result": {
                        "color": "yellow",
                        "index": 2,
                        "text": "UNSET"
                      }
                    },
                    "type": "special"
                  }
                ]
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "yellow",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1
                    }
                  ]
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 6,
        "w": 24,
        "x": 0,
        "y": 1
      },
      "id": 25,
      "links": [
        {
          "targetBlank": true,
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1025"
        }
      ],
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "clamp_max(\n  count by (workload) (\n    label_replace(\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"})),\n      \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n    )\n  ),\n  1\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "clamp_max(\n  count by (workload) (\n    label_replace(\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"})),\n      \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n    )\n  ),\n  1\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_lim"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "clamp_max(\n  count by (workload) (\n    label_replace(\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"})),\n      \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n    )\n  ),\n  1\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "clamp_max(\n  count by (workload) (\n    label_replace(\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"})),\n      \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n    )\n  ),\n  1\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_lim"
        }
      ],
      "title": "\ud83d\udd27 Resource Configuration Status",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true
            },
            "indexByName": {
              "Value #cpu_lim": 2,
              "Value #cpu_req": 1,
              "Value #mem_lim": 4,
              "Value #mem_req": 3,
              "workload": 0
            },
            "renameByName": {
              "Value #cpu_lim": "CPU Lim",
              "Value #cpu_req": "CPU Req",
              "Value #mem_lim": "Mem Lim",
              "Value #mem_req": "Mem Req",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "CPU consumption statistics for all workloads in the namespace (values in millicores).",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*\\(m\\)"
            },
            "properties": [
              {
                "id": "unit",
                "value": "short"
              },
              {
                "id": "decimals",
                "value": 1
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "P\\d+.*"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*/Pod.*"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Pods"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 0
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 7
      },
      "id": 1,
      "links": [
        {
          "targetBlank": true,
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1107"
        }
      ],
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": true,
          "enablePagination": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "editorMode": "code",
          "expr": "count by (workload) (\n  label_replace(\n    kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"},\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "pod_count",
          "format": "table"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.90,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p90"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p95"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.99,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p99"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "min by (workload) (\n  label_replace(\n    min_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_min"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_request"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_limit"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    avg by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_req_pod"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    avg by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_lim_pod"
        }
      ],
      "title": "\ud83d\udccb CPU Resource Usage (millicores)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true,
              "Time 9": true,
              "Time 10": true,
              "Time 11": true,
              "Time #pod_count": true
            },
            "indexByName": {
              "workload": 0,
              "Value #pod_count": 1,
              "Value #cpu_min": 2,
              "Value #cpu_max": 3,
              "Value #cpu_avg": 4,
              "Value #cpu_p90": 5,
              "Value #cpu_p95": 6,
              "Value #cpu_p99": 7,
              "Value #cpu_request": 8,
              "Value #cpu_req_pod": 9,
              "Value #cpu_limit": 10,
              "Value #cpu_lim_pod": 11
            },
            "renameByName": {
              "workload": "Workload",
              "Value #pod_count": "Pods",
              "Value #cpu_min": "Min (m)",
              "Value #cpu_max": "Max (m)",
              "Value #cpu_avg": "Avg (m)",
              "Value #cpu_p90": "P90 (m)",
              "Value #cpu_p95": "P95 (m)",
              "Value #cpu_p99": "P99 (m)",
              "Value #cpu_request": "Req (m)",
              "Value #cpu_req_pod": "Req/Pod (m)",
              "Value #cpu_limit": "Lim (m)",
              "Value #cpu_lim_pod": "Lim/Pod (m)"
            }
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time 11": true,
              "Time #pod_count": true
            },
            "indexByName": {
              "Workload": 0,
              "Pods": 1,
              "Min (m)": 2,
              "Max (m)": 3,
              "Avg (m)": 4,
              "P90 (m)": 5,
              "P95 (m)": 6,
              "P99 (m)": 7,
              "Req (m)": 8,
              "Req/Pod (m)": 9,
              "Lim (m)": 10,
              "Lim/Pod (m)": 11
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Memory consumption statistics for all workloads in the namespace (values in MiB).",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*\\(MiB\\)"
            },
            "properties": [
              {
                "id": "unit",
                "value": "short"
              },
              {
                "id": "decimals",
                "value": 1
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "P\\d+.*"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*/Pod.*"
            },
            "properties": [
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              },
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Pods"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 0
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 15
      },
      "id": 21,
      "links": [
        {
          "targetBlank": true,
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1021"
        }
      ],
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": true,
          "enablePagination": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "$datasource"
          },
          "editorMode": "code",
          "expr": "count by (workload) (\n  label_replace(\n    kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"},\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "pod_count",
          "format": "table"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.90,\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_p90"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_p95"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.99,\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_p99"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "min by (workload) (\n  label_replace(\n    min_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_min"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_request"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_limit"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    avg by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_req_pod"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    avg by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_lim_pod"
        }
      ],
      "title": "\ud83d\udccb Memory Resource Usage (MiB)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true,
              "Time 9": true,
              "Time 10": true,
              "Time 11": true,
              "Time #pod_count": true
            },
            "indexByName": {
              "workload": 0,
              "Value #pod_count": 1,
              "Value #mem_min": 2,
              "Value #mem_max": 3,
              "Value #mem_avg": 4,
              "Value #mem_p90": 5,
              "Value #mem_p95": 6,
              "Value #mem_p99": 7,
              "Value #mem_request": 8,
              "Value #mem_req_pod": 9,
              "Value #mem_limit": 10,
              "Value #mem_lim_pod": 11
            },
            "renameByName": {
              "workload": "Workload",
              "Value #pod_count": "Pods",
              "Value #mem_min": "Min (MiB)",
              "Value #mem_max": "Max (MiB)",
              "Value #mem_avg": "Avg (MiB)",
              "Value #mem_p90": "P90 (MiB)",
              "Value #mem_p95": "P95 (MiB)",
              "Value #mem_p99": "P99 (MiB)",
              "Value #mem_request": "Req (MiB)",
              "Value #mem_req_pod": "Req/Pod (MiB)",
              "Value #mem_limit": "Lim (MiB)",
              "Value #mem_lim_pod": "Lim/Pod (MiB)"
            }
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time 11": true,
              "Time #pod_count": true
            },
            "indexByName": {
              "Workload": 0,
              "Pods": 1,
              "Min (MiB)": 2,
              "Max (MiB)": 3,
              "Avg (MiB)": 4,
              "P90 (MiB)": 5,
              "P95 (MiB)": 6,
              "P99 (MiB)": 7,
              "Req (MiB)": 8,
              "Req/Pod (MiB)": 9,
              "Lim (MiB)": 10,
              "Lim/Pod (MiB)": 11
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 23
      },
      "id": 107,
      "panels": [],
      "title": "\ud83d\udd0d Namespace Resource Consumption Analysis: $namespace",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Analyzes resource efficiency (Util%) and throttling/OOM risk (Risk%) for each workload.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Util %"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "blue",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 50
                    },
                    {
                      "color": "yellow",
                      "value": 90
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Risk %"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 70
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 24
      },
      "id": 20,
      "links": [
        {
          "targetBlank": true,
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1020"
        }
      ],
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_request"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_limit"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_request"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_limit"
        }
      ],
      "title": "\ud83d\udcca Resource Utilization & Risk Analysis",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #cpu_avg": "CPU Avg",
              "Value #cpu_limit": "CPU Limit",
              "Value #cpu_max": "CPU Max",
              "Value #cpu_request": "CPU Request",
              "Value #mem_avg": "Mem Avg",
              "Value #mem_limit": "Mem Limit",
              "Value #mem_max": "Mem Max",
              "Value #mem_request": "Mem Request",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_util_ratio",
            "binary": {
              "left": "CPU Avg",
              "operator": "/",
              "right": "CPU Request"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Util %",
            "binary": {
              "left": "_cpu_util_ratio",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_risk_ratio",
            "binary": {
              "left": "CPU Max",
              "operator": "/",
              "right": "CPU Limit"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Risk %",
            "binary": {
              "left": "_cpu_risk_ratio",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_util_ratio",
            "binary": {
              "left": "Mem Avg",
              "operator": "/",
              "right": "Mem Request"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Util %",
            "binary": {
              "left": "_mem_util_ratio",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_risk_ratio",
            "binary": {
              "left": "Mem Max",
              "operator": "/",
              "right": "Mem Limit"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Risk %",
            "binary": {
              "left": "_mem_risk_ratio",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU Avg": true,
              "CPU Limit": true,
              "CPU Max": true,
              "CPU Request": true,
              "Mem Avg": true,
              "Mem Limit": true,
              "Mem Max": true,
              "Mem Request": true,
              "_cpu_risk_ratio": true,
              "_cpu_util_ratio": true,
              "_mem_risk_ratio": true,
              "_mem_util_ratio": true
            },
            "indexByName": {
              "CPU Risk %": 2,
              "CPU Util %": 1,
              "Mem Risk %": 4,
              "Mem Util %": 3,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Shows percentage of time each workload spends in different resource zones over the selected time range.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*< Req.*"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 50
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Req-Lim.*"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 20
                    },
                    {
                      "color": "green",
                      "value": 50
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU % > Lim"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 1
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Mem % > Lim"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 0.01
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 32
      },
      "id": 22,
      "links": [
        {
          "targetBlank": true,
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1022"
        }
      ],
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        < bool\n        sum by (created_by_name) (\n          kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_below_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        (\n          sum by (created_by_name) (\n            rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n          >= bool\n          sum by (created_by_name) (\n            kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n        )\n        and\n        (\n          sum by (created_by_name) (\n            rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n          < bool\n          sum by (created_by_name) (\n            kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n        )\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_req_lim"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        >= bool\n        sum by (created_by_name) (\n          kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_above_lim"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        < bool\n        sum by (created_by_name) (\n          kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_below_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        (\n          sum by (created_by_name) (\n            container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n          >= bool\n          sum by (created_by_name) (\n            kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n        )\n        and\n        (\n          sum by (created_by_name) (\n            container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n          < bool\n          sum by (created_by_name) (\n            kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n            * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n          )\n        )\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_req_lim"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        >= bool\n        sum by (created_by_name) (\n          kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_above_lim"
        }
      ],
      "title": "\u23f1\ufe0f Time Distribution by Resource Zone",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true
            },
            "indexByName": {
              "Value #cpu_above_lim": 3,
              "Value #cpu_below_req": 1,
              "Value #cpu_req_lim": 2,
              "Value #mem_above_lim": 6,
              "Value #mem_below_req": 4,
              "Value #mem_req_lim": 5,
              "workload": 0
            },
            "renameByName": {
              "Value #cpu_above_lim": "CPU % > Lim",
              "Value #cpu_below_req": "CPU % < Req",
              "Value #cpu_req_lim": "CPU % Req-Lim",
              "Value #mem_above_lim": "Mem % > Lim",
              "Value #mem_below_req": "Mem % < Req",
              "Value #mem_req_lim": "Mem % Req-Lim",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Shows the Limit/Request ratio for CPU and Memory to identify potentially problematic configurations.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "decimals": 1
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU Lim/Req"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1.2
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Mem Lim/Req"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1.2
                    },
                    {
                      "color": "yellow",
                      "value": 3.5
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 6,
        "w": 24,
        "x": 0,
        "y": 40
      },
      "id": 23,
      "links": [
        {
          "targetBlank": true,
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1023"
        }
      ],
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)\n/\nsum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_lim_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)\n/\nsum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_lim_req"
        }
      ],
      "title": "\u2696\ufe0f Limit/Request Ratio Analysis",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true
            },
            "indexByName": {
              "Value #cpu_lim_req": 1,
              "Value #mem_lim_req": 2,
              "workload": 0
            },
            "renameByName": {
              "Value #cpu_lim_req": "CPU Lim/Req",
              "Value #mem_lim_req": "Mem Lim/Req",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 46
      },
      "id": 108,
      "panels": [],
      "title": "\ud83e\uddea Normal Profile Simulation: $namespace",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated resource efficiency (Util%) and risk (Risk%) using NORMAL profile. CPU: Req=P90, Lim=P99\u00d71.5. Memory: Req=P95, Lim=MAX\u00d71.2",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Util %"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "blue",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 50
                    },
                    {
                      "color": "yellow",
                      "value": 90
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Risk %"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 70
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 63
      },
      "id": 109,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.90,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p90"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.99,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p99"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_p95"
        }
      ],
      "title": "\ud83e\uddea Resource Utilization & Risk Analysis (Normal)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #cpu_avg": "CPU Avg",
              "Value #cpu_max": "CPU Max",
              "Value #cpu_p90": "CPU P90",
              "Value #cpu_p99": "CPU P99",
              "Value #mem_avg": "Mem Avg",
              "Value #mem_max": "Mem Max",
              "Value #mem_p95": "Mem P95",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_req",
            "binary": {
              "left": "CPU P90",
              "operator": "*",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_lim",
            "binary": {
              "left": "CPU P99",
              "operator": "*",
              "right": "1.5"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_lim",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1.2"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_util",
            "binary": {
              "left": "CPU Avg",
              "operator": "/",
              "right": "_cpu_req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Util %",
            "binary": {
              "left": "_cpu_util",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_risk",
            "binary": {
              "left": "CPU Max",
              "operator": "/",
              "right": "_cpu_lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Risk %",
            "binary": {
              "left": "_cpu_risk",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_util",
            "binary": {
              "left": "Mem Avg",
              "operator": "/",
              "right": "Mem P95"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Util %",
            "binary": {
              "left": "_mem_util",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_risk",
            "binary": {
              "left": "Mem Max",
              "operator": "/",
              "right": "_mem_lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Risk %",
            "binary": {
              "left": "_mem_risk",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU Avg": true,
              "CPU Max": true,
              "CPU P90": true,
              "CPU P99": true,
              "Mem Avg": true,
              "Mem Max": true,
              "Mem P95": true,
              "_cpu_lim": true,
              "_cpu_req": true,
              "_cpu_risk": true,
              "_cpu_util": true,
              "_mem_lim": true,
              "_mem_risk": true,
              "_mem_util": true
            },
            "indexByName": {
              "CPU Risk %": 2,
              "CPU Util %": 1,
              "Mem Risk %": 4,
              "Mem Util %": 3,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1109",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated time distribution using NORMAL profile. CPU: Req=P90, Lim=P99\u00d71.5. Memory: Req=P95, Lim=MAX\u00d71.2",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*< Req.*"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 50
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Req-Lim.*"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 20
                    },
                    {
                      "color": "green",
                      "value": 50
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU % > Lim"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 1
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Mem % > Lim"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 0.01
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 71
      },
      "id": 111,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        < bool\n        (quantile_over_time(0.90, sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval]))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_below_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        >= bool\n        (quantile_over_time(0.99, sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval]) * 1.5)\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_above_lim"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        < bool\n        quantile_over_time(0.95, sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval])\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_below_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        >= bool\n        (max_over_time(sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval]) * 1.2)\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_above_lim"
        }
      ],
      "title": "\ud83e\uddea Time Distribution by Resource Zone (Normal)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #cpu_above_lim": "CPU % > Lim",
              "Value #cpu_below_req": "CPU % < Req",
              "Value #mem_above_lim": "Mem % > Lim",
              "Value #mem_below_req": "Mem % < Req",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_req_lim_temp",
            "binary": {
              "left": "100",
              "operator": "-",
              "right": "CPU % < Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU % Req-Lim",
            "binary": {
              "left": "_cpu_req_lim_temp",
              "operator": "-",
              "right": "CPU % > Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_req_lim_temp",
            "binary": {
              "left": "100",
              "operator": "-",
              "right": "Mem % < Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem % Req-Lim",
            "binary": {
              "left": "_mem_req_lim_temp",
              "operator": "-",
              "right": "Mem % > Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "_cpu_req_lim_temp": true,
              "_mem_req_lim_temp": true
            },
            "indexByName": {
              "CPU % < Req": 1,
              "CPU % > Lim": 3,
              "CPU % Req-Lim": 2,
              "Mem % < Req": 4,
              "Mem % > Lim": 6,
              "Mem % Req-Lim": 5,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1111",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated Limit/Request ratio using NORMAL profile. CPU: Req=P90, Lim=P99\u00d71.5. Memory: Req=P95, Lim=MAX\u00d71.2",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "decimals": 1
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU Lim/Req"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1.2
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Mem Lim/Req"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1.2
                    },
                    {
                      "color": "yellow",
                      "value": 3.5
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 6,
        "w": 24,
        "x": 0,
        "y": 79
      },
      "id": 110,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.90,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p90"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.99,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p99"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_p95"
        }
      ],
      "title": "\ud83e\uddea Limit/Request Ratio Analysis (Normal)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #cpu_p90": "CPU P90",
              "Value #cpu_p99": "CPU P99",
              "Value #mem_max": "Mem Max",
              "Value #mem_p95": "Mem P95",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_req",
            "binary": {
              "left": "CPU P90",
              "operator": "*",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_lim",
            "binary": {
              "left": "CPU P99",
              "operator": "*",
              "right": "1.5"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_lim",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1.2"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim/Req",
            "binary": {
              "left": "_cpu_lim",
              "operator": "/",
              "right": "_cpu_req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim/Req",
            "binary": {
              "left": "_mem_lim",
              "operator": "/",
              "right": "Mem P95"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU P90": true,
              "CPU P99": true,
              "Mem Max": true,
              "Mem P95": true,
              "_cpu_lim": true,
              "_cpu_req": true,
              "_mem_lim": true
            },
            "indexByName": {
              "CPU Lim/Req": 1,
              "Mem Lim/Req": 2,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1110",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated CPU request/limit values using NORMAL profile, per-replica values, and differences from actual configuration. CPU: Req=P90, Lim=P991.5",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "text",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 150
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Pods"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 50
              },
              {
                "id": "decimals",
                "value": 0
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*\u0394.*"
            },
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "text",
                      "value": 0
                    },
                    {
                      "color": "red",
                      "value": 0.001
                    }
                  ]
                }
              },
              {
                "id": "color",
                "value": {
                  "mode": "thresholds"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^CPU (Req|Lim)/Pod \\(m\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^CPU (Req|Lim) \\(m\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 47
      },
      "id": 115,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": true,
          "enablePagination": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "count by (workload) (\n  label_replace(\n    kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"},\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "pod_count"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.90,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p90"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.99,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p99"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_req_real"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_lim_real"
        }
      ],
      "title": "\ud83e\uddea Simulated CPU Values (Normal)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {},
            "indexByName": {},
            "renameByName": {
              "Value #pod_count": "Pods",
              "Value #cpu_p90": "CPU P90",
              "Value #cpu_p99": "CPU P99",
              "Value #cpu_req_real": "Real CPU Req",
              "Value #cpu_lim_real": "Real CPU Lim",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req",
            "binary": {
              "left": "CPU P90",
              "operator": "*",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim",
            "binary": {
              "left": "CPU P99",
              "operator": "*",
              "right": "1.5"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req/Pod",
            "binary": {
              "left": "CPU Req",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim/Pod",
            "binary": {
              "left": "CPU Lim",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req \u0394",
            "binary": {
              "left": "CPU Req",
              "operator": "-",
              "right": "Real CPU Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim \u0394",
            "binary": {
              "left": "CPU Lim",
              "operator": "-",
              "right": "Real CPU Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req \u0394/Pod",
            "binary": {
              "left": "CPU Req \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim \u0394/Pod",
            "binary": {
              "left": "CPU Lim \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU P90": true,
              "CPU P99": true,
              "Real CPU Req": true,
              "Real CPU Lim": true,
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true,
              "Time 9": true
            },
            "indexByName": {
              "Workload": 0,
              "Pods": 1,
              "CPU Req (m)": 2,
              "CPU Req \u0394 (m)": 3,
              "CPU Req/Pod (m)": 4,
              "CPU Req \u0394/Pod (m)": 5,
              "CPU Lim (m)": 6,
              "CPU Lim \u0394 (m)": 7,
              "CPU Lim/Pod (m)": 8,
              "CPU Lim \u0394/Pod (m)": 9
            },
            "renameByName": {
              "CPU Req": "CPU Req (m)",
              "CPU Req \u0394": "CPU Req \u0394 (m)",
              "CPU Req/Pod": "CPU Req/Pod (m)",
              "CPU Req \u0394/Pod": "CPU Req \u0394/Pod (m)",
              "CPU Lim": "CPU Lim (m)",
              "CPU Lim \u0394": "CPU Lim \u0394 (m)",
              "CPU Lim/Pod": "CPU Lim/Pod (m)",
              "CPU Lim \u0394/Pod": "CPU Lim \u0394/Pod (m)"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1115",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated Memory request/limit values using NORMAL profile, per-replica values, and differences from actual configuration. Memory: Req=P95, Lim=MAX1.2",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "text",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 150
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Pods"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 50
              },
              {
                "id": "decimals",
                "value": 0
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*\u0394.*"
            },
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "text",
                      "value": 0
                    },
                    {
                      "color": "red",
                      "value": 0.001
                    }
                  ]
                }
              },
              {
                "id": "color",
                "value": {
                  "mode": "thresholds"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^Mem (Req|Lim)/Pod \\(MiB\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^Mem (Req|Lim) \\(MiB\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 55
      },
      "id": 118,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": true,
          "enablePagination": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "count by (workload) (\n  label_replace(\n    kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"},\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "pod_count"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_p95"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_req_real"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_lim_real"
        }
      ],
      "title": "\ud83e\uddea Simulated Memory Values (Normal)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {},
            "indexByName": {},
            "renameByName": {
              "Value #pod_count": "Pods",
              "Value #mem_p95": "Mem P95",
              "Value #mem_max": "Mem Max",
              "Value #mem_req_real": "Real Mem Req",
              "Value #mem_lim_real": "Real Mem Lim",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req",
            "binary": {
              "left": "Mem P95",
              "operator": "*",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1.2"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req/Pod",
            "binary": {
              "left": "Mem Req",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim/Pod",
            "binary": {
              "left": "Mem Lim",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req \u0394",
            "binary": {
              "left": "Mem Req",
              "operator": "-",
              "right": "Real Mem Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim \u0394",
            "binary": {
              "left": "Mem Lim",
              "operator": "-",
              "right": "Real Mem Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req \u0394/Pod",
            "binary": {
              "left": "Mem Req \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim \u0394/Pod",
            "binary": {
              "left": "Mem Lim \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Mem P95": true,
              "Mem Max": true,
              "Real Mem Req": true,
              "Real Mem Lim": true,
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true,
              "Time 9": true
            },
            "indexByName": {
              "Workload": 0,
              "Pods": 1,
              "Mem Req (MiB)": 2,
              "Mem Req \u0394 (MiB)": 3,
              "Mem Req/Pod (MiB)": 4,
              "Mem Req \u0394/Pod (MiB)": 5,
              "Mem Lim (MiB)": 6,
              "Mem Lim \u0394 (MiB)": 7,
              "Mem Lim/Pod (MiB)": 8,
              "Mem Lim \u0394/Pod (MiB)": 9
            },
            "renameByName": {
              "Mem Req": "Mem Req (MiB)",
              "Mem Req \u0394": "Mem Req \u0394 (MiB)",
              "Mem Req/Pod": "Mem Req/Pod (MiB)",
              "Mem Req \u0394/Pod": "Mem Req \u0394/Pod (MiB)",
              "Mem Lim": "Mem Lim (MiB)",
              "Mem Lim \u0394": "Mem Lim \u0394 (MiB)",
              "Mem Lim/Pod": "Mem Lim/Pod (MiB)",
              "Mem Lim \u0394/Pod": "Mem Lim \u0394/Pod (MiB)"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1118",
          "targetBlank": true
        }
      ]
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 85
      },
      "id": 117,
      "panels": [],
      "title": "\ud83e\uddea Aggressive Profile Simulation: $namespace",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated resource efficiency (Util%) and risk (Risk%) using AGGRESSIVE profile. CPU: Req=P95\u00d71.1, Lim=MAX\u00d71.25. Memory: Req=MAX, Lim=MAX\u00d71.25",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Util %"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "blue",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 50
                    },
                    {
                      "color": "yellow",
                      "value": 90
                    },
                    {
                      "color": "red",
                      "value": 100
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Risk %"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 70
                    },
                    {
                      "color": "red",
                      "value": 90
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 102
      },
      "id": 112,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p95"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_avg"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        }
      ],
      "title": "\ud83e\uddea Resource Utilization & Risk Analysis (Aggressive)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #cpu_avg": "CPU Avg",
              "Value #cpu_max": "CPU Max",
              "Value #cpu_p95": "CPU P95",
              "Value #mem_avg": "Mem Avg",
              "Value #mem_max": "Mem Max",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Sim CPU Req",
            "binary": {
              "left": "CPU P95",
              "operator": "*",
              "right": "1.1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Sim CPU Lim",
            "binary": {
              "left": "CPU Max",
              "operator": "*",
              "right": "1.25"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Sim Mem Req",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Sim Mem Lim",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1.25"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_util",
            "binary": {
              "left": "CPU Avg",
              "operator": "/",
              "right": "Sim CPU Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Util %",
            "binary": {
              "left": "_cpu_util",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_risk",
            "binary": {
              "left": "CPU Max",
              "operator": "/",
              "right": "Sim CPU Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Risk %",
            "binary": {
              "left": "_cpu_risk",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_util",
            "binary": {
              "left": "Mem Avg",
              "operator": "/",
              "right": "Sim Mem Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Util %",
            "binary": {
              "left": "_mem_util",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_risk",
            "binary": {
              "left": "Mem Max",
              "operator": "/",
              "right": "Sim Mem Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Risk %",
            "binary": {
              "left": "_mem_risk",
              "operator": "*",
              "right": "100"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU Avg": true,
              "CPU Max": true,
              "CPU P95": true,
              "Mem Avg": true,
              "Mem Max": true,
              "Sim CPU Lim": true,
              "Sim CPU Req": true,
              "Sim Mem Lim": true,
              "Sim Mem Req": true,
              "_cpu_risk": true,
              "_cpu_util": true,
              "_mem_risk": true,
              "_mem_util": true
            },
            "indexByName": {
              "CPU Risk %": 2,
              "CPU Util %": 1,
              "Mem Risk %": 4,
              "Mem Util %": 3,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1112",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated time distribution using AGGRESSIVE profile. CPU: Req=P95\u00d71.1, Lim=MAX\u00d71.25. Memory: Req=MAX, Lim=MAX\u00d71.25",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*< Req.*"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 50
                    },
                    {
                      "color": "red",
                      "value": 80
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*Req-Lim.*"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 20
                    },
                    {
                      "color": "green",
                      "value": 50
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU % > Lim"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "yellow",
                      "value": 1
                    },
                    {
                      "color": "red",
                      "value": 10
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Mem % > Lim"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percent"
              },
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "red",
                      "value": 0.01
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 110
      },
      "id": 113,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        < bool\n        (quantile_over_time(0.95, sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval]) * 1.1)\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_below_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        >= bool\n        (max_over_time(sum by (created_by_name) (\n          rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval]) * 1.25)\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_above_lim"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        < bool\n        max_over_time(sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval])\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_below_req"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    avg_over_time(\n      (\n        sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )\n        >= bool\n        (max_over_time(sum by (created_by_name) (\n          container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n          * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n        )[$__range:$__rate_interval]) * 1.25)\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 100",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_above_lim"
        }
      ],
      "title": "\ud83e\uddea Time Distribution by Resource Zone (Aggressive)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true
            },
            "indexByName": {
              "Value #cpu_above_lim": 2,
              "Value #cpu_below_req": 1,
              "Value #mem_above_lim": 4,
              "Value #mem_below_req": 3,
              "workload": 0
            },
            "renameByName": {
              "Value #cpu_above_lim": "CPU % > Lim",
              "Value #cpu_below_req": "CPU % < Req",
              "Value #mem_above_lim": "Mem % > Lim",
              "Value #mem_below_req": "Mem % < Req",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_cpu_req_lim",
            "binary": {
              "left": "100",
              "operator": "-",
              "right": "CPU % < Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU % Req-Lim",
            "binary": {
              "left": "_cpu_req_lim",
              "operator": "-",
              "right": "CPU % > Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "_mem_req_lim",
            "binary": {
              "left": "100",
              "operator": "-",
              "right": "Mem % < Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem % Req-Lim",
            "binary": {
              "left": "_mem_req_lim",
              "operator": "-",
              "right": "Mem % > Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "_cpu_req_lim": true,
              "_mem_req_lim": true
            },
            "indexByName": {
              "CPU % < Req": 1,
              "CPU % > Lim": 3,
              "CPU % Req-Lim": 2,
              "Mem % < Req": 4,
              "Mem % > Lim": 6,
              "Mem % Req-Lim": 5,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1113",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated Limit/Request ratio using AGGRESSIVE profile. CPU: Req=P95\u00d71.1, Lim=MAX\u00d71.25. Memory: Req=MAX, Lim=MAX\u00d71.25",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "decimals": 1
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 200
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "CPU Lim/Req"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1.2
                    },
                    {
                      "color": "yellow",
                      "value": 10
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Mem Lim/Req"
            },
            "properties": [
              {
                "id": "decimals",
                "value": 1
              },
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "red",
                      "value": null
                    },
                    {
                      "color": "green",
                      "value": 1.2
                    },
                    {
                      "color": "yellow",
                      "value": 3.5
                    }
                  ]
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "mode": "gradient",
                  "type": "color-background"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 6,
        "w": 24,
        "x": 0,
        "y": 118
      },
      "id": 114,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p95"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        }
      ],
      "title": "\ud83e\uddea Limit/Request Ratio Analysis (Aggressive)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true
            },
            "indexByName": {},
            "renameByName": {
              "Value #cpu_max": "CPU Max",
              "Value #cpu_p95": "CPU P95",
              "Value #mem_max": "Mem Max",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Sim CPU Req",
            "binary": {
              "left": "CPU P95",
              "operator": "*",
              "right": "1.1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Sim CPU Lim",
            "binary": {
              "left": "CPU Max",
              "operator": "*",
              "right": "1.25"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim/Req",
            "binary": {
              "left": "Sim CPU Lim",
              "operator": "/",
              "right": "Sim CPU Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim/Req",
            "binary": {
              "left": "1.25",
              "operator": "/",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU Max": true,
              "CPU P95": true,
              "Mem Max": true,
              "Sim CPU Lim": true,
              "Sim CPU Req": true
            },
            "indexByName": {
              "CPU Lim/Req": 1,
              "Mem Lim/Req": 2,
              "Workload": 0
            },
            "renameByName": {}
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1114",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated CPU request/limit values using AGGRESSIVE profile, per-replica values, and differences from actual configuration. CPU: Req=P951.1, Lim=MAX1.25",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "text",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 150
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Pods"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 50
              },
              {
                "id": "decimals",
                "value": 0
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*\u0394.*"
            },
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "text",
                      "value": 0
                    },
                    {
                      "color": "red",
                      "value": 0.001
                    }
                  ]
                }
              },
              {
                "id": "color",
                "value": {
                  "mode": "thresholds"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^CPU (Req|Lim)/Pod \\(m\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^CPU (Req|Lim) \\(m\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 86
      },
      "id": 116,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": true,
          "enablePagination": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "count by (workload) (\n  label_replace(\n    kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"},\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "pod_count"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "avg by (workload) (\n  label_replace(\n    quantile_over_time(0.95,\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_p95"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        rate(container_cpu_usage_seconds_total{namespace=\"$namespace\", container!=\"\", image!=\"\"}[$__rate_interval])\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_req_real"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"cpu\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) * 1000",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "cpu_lim_real"
        }
      ],
      "title": "\ud83e\uddea Simulated CPU Values (Aggressive)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {},
            "indexByName": {},
            "renameByName": {
              "Value #pod_count": "Pods",
              "Value #cpu_p95": "CPU P95",
              "Value #cpu_max": "CPU Max",
              "Value #cpu_req_real": "Real CPU Req",
              "Value #cpu_lim_real": "Real CPU Lim",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req",
            "binary": {
              "left": "CPU P95",
              "operator": "*",
              "right": "1.1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim",
            "binary": {
              "left": "CPU Max",
              "operator": "*",
              "right": "1.25"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req/Pod",
            "binary": {
              "left": "CPU Req",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim/Pod",
            "binary": {
              "left": "CPU Lim",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req \u0394",
            "binary": {
              "left": "CPU Req",
              "operator": "-",
              "right": "Real CPU Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim \u0394",
            "binary": {
              "left": "CPU Lim",
              "operator": "-",
              "right": "Real CPU Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Req \u0394/Pod",
            "binary": {
              "left": "CPU Req \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "CPU Lim \u0394/Pod",
            "binary": {
              "left": "CPU Lim \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "CPU P95": true,
              "CPU Max": true,
              "Real CPU Req": true,
              "Real CPU Lim": true,
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true
            },
            "indexByName": {
              "Workload": 0,
              "Pods": 1,
              "CPU Req (m)": 2,
              "CPU Req \u0394 (m)": 3,
              "CPU Req/Pod (m)": 4,
              "CPU Req \u0394/Pod (m)": 5,
              "CPU Lim (m)": 6,
              "CPU Lim \u0394 (m)": 7,
              "CPU Lim/Pod (m)": 8,
              "CPU Lim \u0394/Pod (m)": 9
            },
            "renameByName": {
              "CPU Req": "CPU Req (m)",
              "CPU Req \u0394": "CPU Req \u0394 (m)",
              "CPU Req/Pod": "CPU Req/Pod (m)",
              "CPU Req \u0394/Pod": "CPU Req \u0394/Pod (m)",
              "CPU Lim": "CPU Lim (m)",
              "CPU Lim \u0394": "CPU Lim \u0394 (m)",
              "CPU Lim/Pod": "CPU Lim/Pod (m)",
              "CPU Lim \u0394/Pod": "CPU Lim \u0394/Pod (m)"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1116",
          "targetBlank": true
        }
      ]
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Simulated Memory request/limit values using AGGRESSIVE profile, per-replica values, and differences from actual configuration. Memory: Req=MAX, Lim=MAX1.25",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "align": "auto",
            "cellOptions": {
              "type": "auto"
            },
            "inspect": false
          },
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "text",
                "value": null
              }
            ]
          }
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Workload"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 150
              },
              {
                "id": "links",
                "value": [
                  {
                    "title": "View Workload Details",
                    "url": "/d/workload-resource-workload/resource-consumption-analysis-workload-details?var-datasource=$datasource&var-namespace=$namespace&var-workload=${__value.text}",
                    "targetBlank": true
                  }
                ]
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Pods"
            },
            "properties": [
              {
                "id": "custom.width",
                "value": 50
              },
              {
                "id": "decimals",
                "value": 0
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": ".*\u0394.*"
            },
            "properties": [
              {
                "id": "thresholds",
                "value": {
                  "mode": "absolute",
                  "steps": [
                    {
                      "color": "green",
                      "value": null
                    },
                    {
                      "color": "text",
                      "value": 0
                    },
                    {
                      "color": "red",
                      "value": 0.001
                    }
                  ]
                }
              },
              {
                "id": "color",
                "value": {
                  "mode": "thresholds"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^Mem (Req|Lim)/Pod \\(MiB\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byRegexp",
              "options": "^Mem (Req|Lim) \\(MiB\\)$"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "orange",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.cellOptions",
                "value": {
                  "type": "color-text"
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 94
      },
      "id": 119,
      "options": {
        "cellHeight": "sm",
        "footer": {
          "countRows": false,
          "fields": "",
          "reducer": [
            "sum"
          ],
          "show": true,
          "enablePagination": false
        },
        "showHeader": true,
        "sortBy": [
          {
            "desc": false,
            "displayName": "Workload"
          }
        ]
      },
      "pluginVersion": "10.4.3",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "count by (workload) (\n  label_replace(\n    kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"},\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n)",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "pod_count"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "max by (workload) (\n  label_replace(\n    max_over_time(\n      sum by (created_by_name) (\n        container_memory_working_set_bytes{namespace=\"$namespace\", container!=\"\", image!=\"\"}\n        * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n      )[$__range:$__rate_interval]\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_max"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_requests{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_req_real"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum by (workload) (\n  label_replace(\n    sum by (created_by_name) (\n      kube_pod_container_resource_limits{namespace=\"$namespace\", resource=\"memory\", container!=\"\"}\n      * on(pod, namespace) group_left(created_by_name)\n        (group by (pod, namespace, created_by_name, created_by_kind) (kube_pod_info{namespace=\"$namespace\", created_by_kind=~\"$workload_kinds\"}))\n    ),\n    \"workload\", \"$1\", \"created_by_name\", \"^(.+?)(?:-[a-z0-9]{8,10}|-\\\\d+)?$\"\n  )\n) / 1024 / 1024",
          "format": "table",
          "hide": false,
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "mem_lim_real"
        }
      ],
      "title": "\ud83e\uddea Simulated Memory Values (Aggressive)",
      "transformations": [
        {
          "id": "seriesToColumns",
          "options": {
            "byField": "workload"
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {},
            "indexByName": {},
            "renameByName": {
              "Value #pod_count": "Pods",
              "Value #mem_max": "Mem Max",
              "Value #mem_req_real": "Real Mem Req",
              "Value #mem_lim_real": "Real Mem Lim",
              "workload": "Workload"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim",
            "binary": {
              "left": "Mem Max",
              "operator": "*",
              "right": "1.25"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req/Pod",
            "binary": {
              "left": "Mem Req",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim/Pod",
            "binary": {
              "left": "Mem Lim",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req \u0394",
            "binary": {
              "left": "Mem Req",
              "operator": "-",
              "right": "Real Mem Req"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim \u0394",
            "binary": {
              "left": "Mem Lim",
              "operator": "-",
              "right": "Real Mem Lim"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Req \u0394/Pod",
            "binary": {
              "left": "Mem Req \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Mem Lim \u0394/Pod",
            "binary": {
              "left": "Mem Lim \u0394",
              "operator": "/",
              "right": "Pods"
            },
            "mode": "binary",
            "replaceFields": false
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "Mem Max": true,
              "Real Mem Req": true,
              "Real Mem Lim": true,
              "Time": true,
              "Time 1": true,
              "Time 2": true,
              "Time 3": true,
              "Time 4": true,
              "Time 5": true,
              "Time 6": true,
              "Time 7": true,
              "Time 8": true
            },
            "indexByName": {
              "Workload": 0,
              "Pods": 1,
              "Mem Req (MiB)": 2,
              "Mem Req \u0394 (MiB)": 3,
              "Mem Req/Pod (MiB)": 4,
              "Mem Req \u0394/Pod (MiB)": 5,
              "Mem Lim (MiB)": 6,
              "Mem Lim \u0394 (MiB)": 7,
              "Mem Lim/Pod (MiB)": 8,
              "Mem Lim \u0394/Pod (MiB)": 9
            },
            "renameByName": {
              "Mem Req": "Mem Req (MiB)",
              "Mem Req \u0394": "Mem Req \u0394 (MiB)",
              "Mem Req/Pod": "Mem Req/Pod (MiB)",
              "Mem Req \u0394/Pod": "Mem Req \u0394/Pod (MiB)",
              "Mem Lim": "Mem Lim (MiB)",
              "Mem Lim \u0394": "Mem Lim \u0394 (MiB)",
              "Mem Lim/Pod": "Mem Lim/Pod (MiB)",
              "Mem Lim \u0394/Pod": "Mem Lim \u0394/Pod (MiB)"
            }
          }
        },
        {
          "id": "filterByValue",
          "options": {
            "filters": [
              {
                "config": {
                  "id": "isNotNull"
                },
                "fieldName": "Workload"
              }
            ],
            "match": "all",
            "type": "include"
          }
        }
      ],
      "type": "table",
      "links": [
        {
          "title": "\ud83d\udcd6 View Documentation",
          "url": "/d/workload-resource-analysis-docs/workload-resource-consumption-analysis-documentation?viewPanel=1119",
          "targetBlank": true
        }
      ]
    }
  ],
  "refresh": "",
  "schemaVersion": 39,
  "tags": [
    "kubernetes",
    "openshift",
    "resource-analysis",
    "capacity-planning"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "Prometheus-c01p",
          "value": "Q9x_8zb4z"
        },
        "hide": 0,
        "includeAll": false,
        "label": "Cluster",
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "prometheus",
        "queryValue": "",
        "refresh": 1,
        "regex": "/.*-c\\d{2}\\w/",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "current": {
          "selected": true,
          "text": "",
          "value": ""
        },
        "description": "Regex pattern to filter namespace dropdown (e.g., '^1510-.*' or 'prod|staging'). Leave empty to show all namespaces.",
        "hide": 2,
        "includeAll": false,
        "label": "Namespace Filter",
        "multi": false,
        "name": "namespace_filter",
        "options": [
          {
            "selected": true,
            "text": "",
            "value": ""
          }
        ],
        "query": "",
        "skipUrlSync": true,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "1510-p-telediagnostica",
          "value": "1510-p-telediagnostica"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "${datasource}"
        },
        "definition": "label_values(kube_pod_info, namespace)",
        "hide": 0,
        "includeAll": false,
        "label": "Namespace",
        "multi": false,
        "name": "namespace",
        "options": [],
        "query": {
          "query": "label_values(kube_pod_info, namespace)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 2,
        "regex": "/${namespace_filter}/",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      },
      {
        "current": {
          "selected": false,
          "text": "ReplicaSet|ReplicationController|StatefulSet",
          "value": "ReplicaSet|ReplicationController|StatefulSet"
        },
        "description": "Pod owner kinds to include in workload dropdown. Possible values: ReplicaSet (Deployment), ReplicationController (DeploymentConfig), StatefulSet, DaemonSet, Job, Node (static pods)",
        "hide": 2,
        "includeAll": false,
        "label": "Workload Kinds",
        "multi": false,
        "name": "workload_kinds",
        "options": [
          {
            "selected": true,
            "text": "ReplicaSet|ReplicationController|StatefulSet",
            "value": "ReplicaSet|ReplicationController|StatefulSet"
          }
        ],
        "query": "ReplicaSet|ReplicationController|StatefulSet",
        "skipUrlSync": true,
        "type": "custom"
      }
    ]
  },
  "time": {
    "from": "now-24h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "5s",
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "browser",
  "title": "Resource Consumption Analysis - Namespace Overview",
  "uid": "workload-resource-analysis",
  "version": 1,
  "weekStart": ""
}